let isMob=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);let cardUrl=new URL(window.location.href);let paramsName=cardUrl.searchParams.get("name");const title=document.querySelector(".title");const clickBox=document.querySelector(".clickBox");const count=document.querySelector(".count");const imageA=document.querySelector("#imga");const imageB=document.querySelector("#imgb");let countNum=0;if(isMob){console.log("行動裝置");clickBox.addEventListener("touchstart",userPopDown);clickBox.addEventListener("touchend",userPopup)}else{console.log("電腦");clickBox.addEventListener("click",userClick);clickBox.addEventListener("mousedown",userPopDown);clickBox.addEventListener("mouseup",userPopup);clickBox.addEventListener("mouseleave",userPopLeave)}window.onload=async function(){if(paramsName!=null){console.log(paramsName);loadData()}};let pageData="";let audioObj;let audioTime=0;let isMouseClick=false;const host=window.location.protocol+"//"+window.location.host;const path=window.location.pathname.replace("/page/click.html","");function loadData(){pageData=cardData.filter(e=>e.filename===paramsName)[0];document.title=`POP! ${pageData.name}`;imageB.style.display="none";imageA.style.display="inline";const e=`/src/${pageData.filename}-a.png`;imageA.src=host+path+e;const a=`/src/${pageData.filename}-b.png`;imageB.src=host+path+a;imageA.ondragstart=()=>{return false};title.textContent=pageData.name;const t=`/src/${pageData.filename}.mp3`;audioObj=new Audio(host+path+t);console.log(pageData.hasOwnProperty("startTime"));if(pageData.hasOwnProperty("startTime")){audioTime=pageData.startTime}audioObj.currentTime=audioTime}function userClick(e){}function userPopDown(e){countNum+=1;count.textContent=countNum;if(audioObj!==undefined){audioObj.play()}imageB.style.display="inline";imageA.style.display="none";isMouseClick=true}function userPopup(e){if(audioObj!==undefined){if(audioObj.paused===false){audioObj.pause();audioObj.currentTime=audioTime}}setTimeout(()=>{imageB.style.display="none";imageA.style.display="inline";isMouseClick=false},150)}function userPopLeave(e){if(isMouseClick){imageB.style.display="none";imageA.style.display="inline";isMouseClick=false}}