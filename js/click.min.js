let isMob=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);let cardUrl=new URL(window.location.href);let paramsName=cardUrl.searchParams.get("name");const title=document.querySelector(".title");const clickBox=document.querySelector(".clickBox");const count=document.querySelector(".count");const clickImg=document.querySelector(".image");let countNum=0;if(isMob){console.log("行動裝置");clickBox.addEventListener("touchstart",userTouchStart);clickBox.addEventListener("touchend",userTouchEnd)}else{console.log("電腦");clickBox.addEventListener("click",userClick);clickBox.addEventListener("mousedown",userMousedown);clickBox.addEventListener("mouseup",userMouseup);clickBox.addEventListener("mouseleave",userMouseLeave)}window.onload=async function(){if(paramsName!=null){loadJsonData()}};let pageData="";let audioObj;let audioTime=0;let isMouseClick=false;const host=window.location.protocol+"//"+window.location.host;const path=window.location.pathname.replace("/page/click.html","");function loadJsonData(){pageData=cardData.filter(e=>e.filename===paramsName)[0];const cardPath=`/src/${pageData.filename}-a.png`;clickImg.src=host+path+cardPath;clickImg.ondragstart=()=>{return false};title.textContent=pageData.name;const audioPath=`/src/${pageData.filename}.mp3`;audioObj=new Audio(host+path+audioPath);audioObj.currentTime=audioTime}function userClick(e){console.log("點擊")}function userMousedown(){isMouseClick=true;countNum+=1;count.textContent=countNum;if(audioObj!==undefined){audioObj.play()}const cardPath=`/src/${pageData.filename}-b.png`;clickImg.src=host+path+cardPath;console.log("按下")}function userMouseLeave(){if(isMouseClick){const cardPath=`/src/${pageData.filename}-a.png`;clickImg.src=host+path+cardPath;isMouseClick=false}}function userMouseup(){if(audioObj!==undefined){if(audioObj.paused===false){audioObj.pause();audioObj.currentTime=audioTime}}const cardPath=`/src/${pageData.filename}-a.png`;clickImg.src=host+path+cardPath;isMouseClick=false;console.log("放開")}function userTouchStart(){isMouseClick=true;countNum+=1;count.textContent=countNum;if(audioObj!==undefined){audioObj.play()}const cardPath=`/src/${pageData.filename}-b.png`;clickImg.src=host+path+cardPath}function userTouchEnd(){if(audioObj!==undefined){if(audioObj.paused===false){audioObj.pause();audioObj.currentTime=audioTime}}const cardPath=`/src/${pageData.filename}-a.png`;clickImg.src=host+path+cardPath;isMouseClick=false}