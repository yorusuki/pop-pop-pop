let isMob=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);const userAction={popup:"popup",popDown:"popDown",popLeave:"popLeave"};let cardUrl=new URL(window.location.href);let paramsName=cardUrl.searchParams.get("name");const title=document.querySelector(".title");const clickBox=document.querySelector(".clickBox");const count=document.querySelector(".count");const imageA=document.querySelector("#imga");const imageB=document.querySelector("#imgb");let countNum=0;if(isMob){console.log("行動裝置");clickBox.addEventListener("touchstart",userPopDown);clickBox.addEventListener("touchend",userPopup)}else{console.log("電腦");clickBox.addEventListener("click",userClick);clickBox.addEventListener("mousedown",userPopDown);clickBox.addEventListener("mouseup",userPopup);clickBox.addEventListener("mouseleave",userPopLeave)}window.onload=async function(){if(paramsName!=null){console.log(paramsName);loadData()}};let pageData="";let audioObj;let audioTime=0;let isMouseClick=false;const host=window.location.protocol+"//"+window.location.host;const path=window.location.pathname.replace("/page/click.html","");function loadData(){pageData=cardData.filter(e=>e.filename===paramsName)[0];const cardPath=`/src/${pageData.filename}-a.png`;imageA.src=host+path+cardPath;const cardBPath=`/src/${pageData.filename}-b.png`;imageB.src=host+path+cardBPath;imageA.ondragstart=()=>{return false};title.textContent=pageData.name;const audioPath=`/src/${pageData.filename}.mp3`;audioObj=new Audio(host+path+audioPath);audioObj.currentTime=audioTime}function userClick(e){console.log("點擊")}function clickEvent(action){switch(action){case userAction.popDown:break;case userAction.popup:break;case userAction.popLeave:break}}function userPopDown(e){countNum+=1;count.textContent=countNum;if(audioObj!==undefined){audioObj.play()}imageB.style.zIndex="3";isMouseClick=true}function userPopup(e){if(audioObj!==undefined){if(audioObj.paused===false){audioObj.pause();audioObj.currentTime=audioTime}}imageB.style.zIndex="1";isMouseClick=false}function userPopLeave(e){if(isMouseClick){imageB.style.zIndex="1";isMouseClick=false}}