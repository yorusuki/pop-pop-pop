let isMob=/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent);let cardUrl=new URL(window.location.href);let paramsName=cardUrl.searchParams.get("name");const title=document.querySelector(".title");const clickBox=document.querySelector(".clickBox");const count=document.querySelector(".count");const imageA=document.querySelector("#imga");const imageB=document.querySelector("#imgb");let countNum=0;if(isMob){clickBox.addEventListener("touchstart",userPopDown);clickBox.addEventListener("touchend",userPopup)}else{clickBox.addEventListener("click",userClick);clickBox.addEventListener("mousedown",userPopDown);clickBox.addEventListener("mouseup",userPopup);clickBox.addEventListener("mouseleave",userPopLeave)}window.onload=async function(){if(paramsName!=null){loadData()}};let pageData="";let audioObj;let audioStartTime=0;let isMouseClick=false;const host=window.location.protocol+"//"+window.location.host;const path=window.location.pathname.replace("/page/click.html","");function loadData(){pageData=cardData.filter(e=>e.filename===paramsName)[0];imageB.style.display="none";imageA.style.display="inline";const e=`/src/${pageData.filename}-a.png`;imageA.src=host+path+e;const a=`/src/${pageData.filename}-b.png`;imageB.src=host+path+a;imageA.ondragstart=()=>{return false};title.textContent=pageData.name;const t=`/src/${pageData.filename}.mp3`;audioObj=new Audio(host+path+t);if(pageData.hasOwnProperty("startTime")){audioStartTime=pageData.startTime}audioObj.currentTime=audioStartTime}function userClick(e){}function userPopDown(e){countNum+=1;count.textContent=countNum;if(audioObj!==undefined){audioObj.play()}playAnimation();imageB.style.display="inline";imageA.style.display="none";isMouseClick=true}function userPopup(e){setTimeout(()=>{if(audioObj!==undefined){if(audioObj.paused===false){audioObj.pause();audioObj.currentTime=audioStartTime}}imageB.style.display="none";imageA.style.display="inline";isMouseClick=false},100)}function userPopLeave(e){if(isMouseClick){imageB.style.display="none";imageA.style.display="inline";isMouseClick=false}}function playAnimation(){const e={max:25,min:-25};const a={max:1.35,min:1.1};const t=Math.random()*(a.max-a.min)+a.min;const i=Math.random()*(e.max-e.min)+e.min;count.animate([{transform:`rotate(${i}deg)`},{transform:`scaleX(${t})`},{transform:`scaleY(${t})`}],{duration:200,fill:"none",direction:"alternate"})}